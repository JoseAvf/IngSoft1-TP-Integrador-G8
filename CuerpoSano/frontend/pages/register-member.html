<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CuerpoSano | Registrar Miembro</title>
    <style>
        body {
            display: none;
        }
    </style>
    <script src="../js/auth.js"></script>
    <link rel="stylesheet" href="../css/pages/members.css" />
    <link rel="stylesheet" href="../css/components/modal.css" />
    <link rel="stylesheet" href="../css/base/style.css" />
</head>
<body>

    <!-- Header unificado -->
    <header class="main-header">
        <a href="./index.html" class="logo-link">
            <h1>üèãÔ∏è‚Äç‚ôÇÔ∏è CuerpoSano ‚Äî Sistema de Gesti√≥n de Gimnasio</h1>
        </a>
        <nav class="user-nav">
            <span id="userRole">üë§ Empleado</span>
            <button id="logoutBtn">Cerrar Sesi√≥n</button>
        </nav>
    </header>

    <main>
        <section class="form-section">
            <h2>Registrar Nuevo Miembro</h2>

            <form id="memberForm" novalidate>
                <!-- üî∏ Datos personales -->
                <fieldset>
                    <legend>Datos personales</legend>

                    <div class="form-row">
                        <label>Nombre:</label>
                        <input type="text"
                               name="nombre"
                               id="nombre"
                               placeholder="Ej: Mar√≠a Fern√°ndez"
                               required
                               pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s]+"
                               title="Solo letras y espacios">
                    </div>

                    <div class="form-row">
                        <label>DNI:</label>
                        <input type="text"
                               name="dni"
                               id="dni"
                               placeholder="Ej: 40876932"
                               required
                               pattern="[0-9]{7,10}"
                               title="Solo n√∫meros">
                    </div>

                    <div class="form-row">
                        <label>Direcci√≥n:</label>
                        <input type="text"
                               name="direccion"
                               id="direccion"
                               placeholder="Ej: Calle Belgrano 1520, Dpto. 3B"
                               required
                               pattern="[A-Za-z0-9√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s,.-]+"
                               title="Letras, n√∫meros y comas">
                    </div>

                    <div class="form-row">
                        <label>Tel√©fono:</label>
                        <input type="tel"
                               name="telefono"
                               id="telefono"
                               placeholder="Ej: 1165324789"
                               required
                               pattern="[0-9]{6,15}"
                               title="Solo n√∫meros">
                    </div>

                    <div class="form-row">
                        <label>Correo electr√≥nico:</label>
                        <input type="email"
                               name="correo"
                               id="correo"
                               placeholder="Ej: maria.fernandez@gmail.com"
                               required
                               title="Formato v√°lido: ejemplo@dominio.com">
                    </div>

                    <div class="form-row">
                        <label>Fecha de nacimiento:</label>
                        <input type="date"
                               name="fechaNacimiento"
                               id="fechaNacimiento"
                               required>
                    </div>

                    <div class="form-row checkbox-row">
                        <label for="esEstudiante">Estudiante</label>
                        <input type="checkbox" name="esEstudiante" id="esEstudiante">
                    </div>

                    <div class="form-row pic-row">
                        <label for="btnFoto">Foto del miembro </label>
                        <button type="button"
                                id="btnFoto"
                                disabled
                                title="Funci√≥n no disponible a√∫n">
                            üì∑ Tomar Foto
                        </button>
                    </div>

                </fieldset>

                <!-- üî∏ Membres√≠a -->
                <fieldset>
                    <legend>Membres√≠a</legend>

                    <div class="membership-select">
                        <div class="membership-row">
                            <input type="text" id="membresiaTipo" placeholder="Seleccionar tipo..." readonly>
                            <input type="hidden" name="membresiaId" id="membresiaId">
                            <button type="button" id="btnSelectMembership">Elegir Membres√≠a</button>
                        </div>

                        <div id="membershipSummary" class="summary-box">
                            <div class="summary-line">
                                <p>üí∞ Costo base: <span id="costoBase">-</span></p>
                                <p>üéì Descuento aplicado: <span id="descuento">%0</span></p>
                            </div>
                            <div class="summary-total">
                                <strong>Total a pagar: <span id="totalPagar">-</span></strong>
                                <button type="button" id="btnPagar" class="btn-pagar">üí≥ Realizar Pago</button>
                            </div>
                        </div>
                    </div>
                </fieldset>

                <!-- üî∏ Bot√≥n de env√≠o -->
                <button type="submit" id="btnCrear" disabled>Registrar Miembro</button>
                <div id="memberFormResult"></div>
            </form>

            <!-- üî∏ Modal de membres√≠as -->
            <div id="membershipModal" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h3>Seleccionar tipo de membres√≠a</h3>
                    <table id="membershipTable">
                        <thead>
                            <tr>
                                <th>Tipo</th>
                                <th>Duraci√≥n</th>
                                <th>Costo</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </section>


        <!-- üîô Bot√≥n para volver -->
        <div class="back-container">
            <a href="./members.html" class="btn-back">‚¨ÖÔ∏è Volver atr√°s</a>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>¬© 2025 CuerpoSano ‚Äî Todos los derechos reservados</p>
    </footer>

    <script type="module" src="../js/pages/members.js"></script>
    <script>
        

        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('userRole');
            showCloseSession('Sesi√≥n cerrada correctamente');
            setTimeout(() => window.location.href = 'login.html', 2000);
        });
    </script>

</body>
</html>
